<!DOCTYPE html>
<html lang="en">
<head>
    <title>Login - SOLOLEVEL</title>
    <style>
        body { background: #050505; color: #00f2ff; font-family: monospace; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: #0a0a0f; padding: 40px; border: 1px solid #1f293a; border-radius: 12px; width: 300px; text-align: center; box-shadow: 0 0 20px rgba(0, 242, 255, 0.1); }
        h2 { margin-bottom: 20px; letter-spacing: 2px; }
        
        .input-wrapper { position: relative; width: 100%; margin: 10px 0; }
        
        /* Added padding-right to make space for the image icon */
        input { width: 100%; padding: 10px; padding-right: 45px; background: #12121a; border: 1px solid #1f293a; color: white; box-sizing: border-box; }
        input:focus { outline: 1px solid #00f2ff; border-color: #00f2ff; }
        
        button.btn-submit { width: 100%; padding: 10px; background: #00f2ff; border: none; font-weight: bold; cursor: pointer; margin-top: 10px; }
        button.btn-submit:hover { box-shadow: 0 0 10px #00f2ff; }
        
        /* New styling for the image button */
        .toggle-password {
            position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
            background: none; border: none; padding: 0; cursor: pointer;
            display: flex; align-items: center;
        }
        .toggle-password img {
            height: 20px; width: auto; /* Adjust height as needed */
            filter: brightness(0.6) sepia(1) hue-rotate(180deg) saturate(2); /* Makes it a dim blue */
            transition: filter 0.3s;
        }
        .toggle-password:hover img {
            filter: brightness(1) sepia(1) hue-rotate(180deg) saturate(3) drop-shadow(0 0 3px #00f2ff); /* Glows bright blue on hover */
        }

        a { color: #555; font-size: 0.8rem; text-decoration: none; display: block; margin-top: 15px; }
        .flash { color: #ff0055; font-size: 0.8rem; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="card">
        <h2>SYSTEM LOGIN</h2>
        {% with messages = get_flashed_messages() %}
            {% if messages %}<div class="flash">{{ messages[0] }}</div>{% endif %}
        {% endwith %}
        <form method="POST">
            <div class="input-wrapper">
                <input type="text" name="username" placeholder="Username" required>
            </div>
            <div class="input-wrapper">
                <input type="password" name="password" placeholder="Password" required>
                <button type="button" class="toggle-password" onclick="togglePass(this)">
                    <img src="{{ url_for('static', filename='images/image_1.png') }}" 
                         data-show="{{ url_for('static', filename='images/image_1.png') }}"
                         data-hide="{{ url_for('static', filename='images/image_2.png') }}"
                         alt="Show/Hide">
                </button>
            </div>
            <button type="submit" class="btn-submit">ACCESS SYSTEM</button>
        </form>
        <a href="{{ url_for('register') }}">Create New ID</a>
    </div>

    <script>
        function togglePass(button) {
            // The input field is the element right before the button
            const input = button.previousElementSibling;
            // The image is the first child of the button
            const icon = button.querySelector('img');

            if (input.type === "password") {
                input.type = "text";
                // Switch to the "hide" image (image_2.png)
                icon.src = icon.getAttribute('data-hide');
            } else {
                input.type = "password";
                // Switch back to the "show" image (image_1.png)
                icon.src = icon.getAttribute('data-show');
            }
        }
    </script>
</body>
</html>
